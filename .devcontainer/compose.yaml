services:
    app:
        build:
            context: ..
            dockerfile: .devcontainer/dockerfile
        command: sleep infinity
        environment:
            ENVIRONMENT: "Development"

            POSTGRES_DB: "postgres"
            POSTGRES_USER: "postgres"
            POSTGRES_PASSWORD: "123"
        volumes:
            - ..:/app:cached
            - venv:/app/backend/.venv:cached
            - node_modules:/app/frontend/node_modules:cached

    postgres:
        image: postgres:18.1-alpine
        environment:
            POSTGRES_DB: "postgres"
            POSTGRES_USER: "postgres"
            POSTGRES_PASSWORD: "123"
        volumes:
            - postgres:/var/lib/postgresql/data

    redis:
        image: redis:8.4-alpine

    ollama:
        image: chatbot-ollama
        build:
            context: ../backend/ollama
            dockerfile: dockerfile

    mailpit:
        image: axllent/mailpit
        ports:
            - 8025:8025

volumes:
    venv:
    node_modules:
    postgres: